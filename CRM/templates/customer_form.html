{% extends "base.html" %}

{% block title %}{% if customer %}Редактирование клиента{% else %}Новый клиент{% endif %} - CRM System{% endblock %}

{% block content %}
<div class="header-actions">
    <h2><i class="fas fa-user-edit"></i> {% if customer %}Редактирование клиента{% else %}Новый клиент{% endif %}</h2>
    <a href="{{ url_for('customers') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Назад
    </a>
</div>

<div class="card">
    <form method="post" class="form">
        <div class="form-group">
            <label for="last_name">Фамилия</label>
            <input type="text" 
                   id="last_name" 
                   name="last_name" 
                   value="{{ customer.last_name if customer else '' }}" 
                   required
                   class="form-control">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="first_name">Имя</label>
                <input type="text" 
                       id="first_name" 
                       name="first_name" 
                       value="{{ customer.first_name if customer else '' }}" 
                       required
                       class="form-control">
            </div>
            
            <div class="form-group">
                <label for="middle_name">Отчество</label>
                <input type="text" 
                       id="middle_name" 
                       name="middle_name" 
                       value="{{ customer.middle_name if customer else '' }}" 
                       class="form-control">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="phone">Телефон</label>
                <input type="tel" 
                       id="phone" 
                       name="phone" 
                       value="{{ customer.phone if customer else '' }}" 
                       required
                       class="form-control"
                       placeholder="+7 (XXX) XXX-XX-XX">
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" 
                       id="email" 
                       name="email" 
                       value="{{ customer.email if customer else '' }}" 
                       class="form-control">
            </div>
        </div>

        <div class="form-group">
            <label for="registration_date">Дата регистрации</label>
            <input type="date" 
                   id="registration_date" 
                   name="registration_date" 
                   value="{{ customer.registration_date.strftime('%Y-%m-%d') if customer else '' }}" 
                   required
                   class="form-control">
        </div>

        <div class="form-group">
            <label for="notes">Примечания</label>
            <textarea id="notes" 
                      name="notes" 
                      rows="4"
                      class="form-control">{{ customer.notes if customer else '' }}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Сохранить
            </button>
            <a href="{{ url_for('customers') }}" class="btn btn-secondary">
                Отмена
            </a>
        </div>
    </form>
</div>
{% endblock %}